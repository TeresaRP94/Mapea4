!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=75)}({12:function(t,e,n){var i,o;
/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */window,void 0===(o="function"==typeof(i=function(){"use strict";function t(t){var e=parseFloat(t),n=-1==t.indexOf("%")&&!isNaN(e);return n&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},n=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],i=n.length;function o(t){var n=getComputedStyle(t);return n||e("Style returned "+n+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),n}var r,a=!1;function s(e){if(function(){if(!a){a=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(e);var i=o(e);r=200==Math.round(t(i.width)),s.isBoxSizeOuter=r,n.removeChild(e)}}(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var l=o(e);if("none"==l.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<i;e++){var o=n[e];t[o]=0}return t}();var u={};u.width=e.offsetWidth,u.height=e.offsetHeight;for(var c=u.isBorderBox="border-box"==l.boxSizing,h=0;h<i;h++){var p=n[h],d=l[p],f=parseFloat(d);u[p]=isNaN(f)?0:f}var b=u.paddingLeft+u.paddingRight,v=u.paddingTop+u.paddingBottom,g=u.marginLeft+u.marginRight,y=u.marginTop+u.marginBottom,m=u.borderLeftWidth+u.borderRightWidth,_=u.borderTopWidth+u.borderBottomWidth,P=c&&r,E=t(l.width);!1!==E&&(u.width=E+(P?0:b+m));var S=t(l.height);return!1!==S&&(u.height=S+(P?0:v+_)),u.innerWidth=u.width-(b+m),u.innerHeight=u.height-(v+_),u.outerWidth=u.width+g,u.outerHeight=u.height+y,u}}return s})?i.call(e,n,e,t):i)||(t.exports=o)},13:function(t,e,n){var i,o;
/*!
 * Unidragger v2.3.0
 * Draggable base class
 * MIT license
 */
/*!
 * Unidragger v2.3.0
 * Draggable base class
 * MIT license
 */
!function(r,a){i=[n(14)],void 0===(o=function(t){return function(t,e){"use strict";function n(){}var i=n.prototype=Object.create(e.prototype);i.bindHandles=function(){this._bindHandles(!0)},i.unbindHandles=function(){this._bindHandles(!1)},i._bindHandles=function(e){for(var n=(e=void 0===e||e)?"addEventListener":"removeEventListener",i=e?this._touchActionValue:"",o=0;o<this.handles.length;o++){var r=this.handles[o];this._bindStartEvent(r,e),r[n]("click",this),t.PointerEvent&&(r.style.touchAction=i)}},i._touchActionValue="none",i.pointerDown=function(t,e){var n=this.okayPointerDown(t);n&&(this.pointerDownPointer=e,t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))};var o={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},r={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return i.okayPointerDown=function(t){var e=o[t.target.nodeName],n=r[t.target.type],i=!e||n;return i||this._pointerReset(),i},i.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},i.pointerMove=function(t,e){var n=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,n]),this._dragMove(t,e,n)},i._dragPointerMove=function(t,e){var n={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this._dragStart(t,e),n},i.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},i.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},i._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},i._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},i.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},i._dragMove=function(t,e,n){this.isDragging&&this.dragMove(t,e,n)},i.dragMove=function(t,e,n){t.preventDefault(),this.emitEvent("dragMove",[t,e,n])},i._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},i.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},i.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},i._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},i.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},n.getPointerPoint=e.getPointerPoint,n}(r,t)}.apply(e,i))||(t.exports=o)}(window)},14:function(t,e,n){var i,o;
/*!
 * Unipointer v2.3.0
 * base class for doing one thing with pointer event
 * MIT license
 */
/*!
 * Unipointer v2.3.0
 * base class for doing one thing with pointer event
 * MIT license
 */
!function(r,a){i=[n(15)],void 0===(o=function(t){return function(t,e){"use strict";function n(){}var i=n.prototype=Object.create(e.prototype);i.bindStartEvent=function(t){this._bindStartEvent(t,!0)},i.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},i._bindStartEvent=function(e,n){var i=(n=void 0===n||n)?"addEventListener":"removeEventListener",o="mousedown";t.PointerEvent?o="pointerdown":"ontouchstart"in t&&(o="touchstart"),e[i](o,this)},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.getTouch=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.identifier==this.pointerIdentifier)return n}},i.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},i.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},i.onpointerdown=function(t){this._pointerDown(t,t)},i._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},i.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var o={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return i._bindPostStartEvents=function(e){if(e){var n=o[e.type];n.forEach(function(e){t.addEventListener(e,this)},this),this._boundPointerEvents=n}},i._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){t.removeEventListener(e,this)},this),delete this._boundPointerEvents)},i.onmousemove=function(t){this._pointerMove(t,t)},i.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},i.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},i._pointerMove=function(t,e){this.pointerMove(t,e)},i.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},i.onmouseup=function(t){this._pointerUp(t,t)},i.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},i.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},i._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},i.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},i._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},i._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},i.pointerDone=function(){},i.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},i.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},i._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},i.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},n.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},n}(r,t)}.apply(e,i))||(t.exports=o)}(window)},15:function(t,e,n){var i,o;"undefined"!=typeof window&&window,void 0===(o="function"==typeof(i=function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var n=this._events=this._events||{},i=n[t]=n[t]||[];return-1==i.indexOf(e)&&i.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{};return(n[t]=n[t]||{})[e]=!0,this}},e.off=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var i=n.indexOf(e);return-1!=i&&n.splice(i,1),this}},e.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){n=n.slice(0),e=e||[];for(var i=this._onceEvents&&this._onceEvents[t],o=0;o<n.length;o++){var r=n[o];i&&i[r]&&(this.off(t,r),delete i[r]),r.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})?i.call(e,n,e,t):i)||(t.exports=o)},17:function(t,e){t.exports='<div class="m-control m-attributetable-container">\n  <div class="m-attributetable-panel">\n    <div class="title">Tabla de Atributos</div>\n    <div class="m-attributetable-container-select">\n      <p class="m-attributetable-headers">Capas disponibles <span id="m-attributetable-layer" class="g-cartografia-flecha-abajo"></span></p>\n      <select class="" id="m-attributetable-select">\n        <option disabled="disabled" selected="selected">Seleccione una capa...</option>\n        {{#each layers}}\n          <option name="{{this.name}}">{{this.name}}</option>\n        {{/each}}\n        <select>\n    </div>\n    <div id="m-attributetable-datas"></div>\n  </div>\n</div>'},18:function(t,e){t.exports='<div id="m-attributetable-content-attributes">\n    <div class="m-attributetable-headers">\n        <span id="m-attributetable-refresh" class="g-cartografia-flecha-deshacer"></span> Tabla Atributos\n        <span id="m-attributetable-attributes" class="g-cartografia-flecha-abajo"></span>\n    </div>\n    {{#if attributes}}\n    <div id="m-attributetable-table">\n        <table>\n            <tbody>\n                <tr class="m-attributetable-thead">\n                    <td><input type="checkbox" name="selectAll" value="selectAll"></td>\n                    {{#each headerAtt}}\n                    <td>{{this}}</td>\n                    {{/each}}\n                </tr> {{#each attributes}}\n                <tr>\n                    <td><input type="checkbox" name="" value=""></td>\n                    {{#each this}}\n                    <td> {{{this}}}</td>\n                    {{/each}}\n                </tr>\n                {{/each}}\n            </tbody>\n        </table>\n    </div>\n    <div id="m-attributetable-tfoot">\n        <span class="g-cartografia-flecha-izquierda m-attributetable-hidden" id="m-attributetable-previous"></span>\n        <span>Página {{pages.actual}} de {{pages.total}}</span>\n        <span class="g-cartografia-flecha-derecha m-attributetable-hidden" id="m-attributetable-next"></span>\n    </div>\n    {{else}}\n    <div class="m-attributetable-notResult">No se han encontrado atributos.</div>\n    {{/if}}\n</div>\n'},19:function(t){t.exports={url:{name:"attributetable",separator:"*"},constructor:"M.plugin.AttributeTable",parameters:[{type:"object",properties:[{type:"simple",name:"pages",position:0}]}],files:{ol:{scripts:["attributetable-2.0.0.ol.min.js"],styles:["attributetable-2.0.0.min.css"]}},metadata:{name:"Attributable",description:"Shows a table of all the attributes of each feature of a vector layer.",text:"",version:"2.0.0",date:"11/10/2019",author:"Junta de Andalucía",org:"Junta de Andalucía",tags:"mapea,plugin",icon:"./facade/assets/icons/icons.svg"}}},52:function(t,e,n){},75:function(t,e,n){"use strict";n.r(e);n(52);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,s(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,M.impl.Control),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"addTo",value:function(t,n){a(s(e.prototype),"addTo",this).call(this,t,n)}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this)}}]),e}();u.PANEL_ID="m-attibutetable-panel";var c=n(8),h=n.n(c),p=n(17),d=n.n(p),f=n(18),b=n.n(f);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var P=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=new u,o=[null,!1,null,null,null,t,null];return(n=y(this,m(e).call(this,i,"attributetableControl"))).facadeMap_=o[0],n.selectAllActive_=o[1],n.template_=o[2],n.areaTable_=o[3],n.layer_=o[4],n.numPages_=o[5],n.draggable_=o[6],n.pages_={total:0,actual:1,element:0},n.sortProperties_={active:!1,sortBy:null,sortType:null},M.utils.isUndefined(u)&&M.exception("La implementación usada no puede crear controles AttributeTableControl"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,M.Control),function(t,e,n){e&&g(t.prototype,e),n&&g(t,n)}(e,[{key:"createView",value:function(t){var e=this;this.facadeMap_=t;var n={jsonp:!0,vars:{layers:t.getWFS().concat(t.getKML().concat(t.getLayers().filter(function(t){return"GeoJSON"===t.type})))}},i=M.template.compileSync(d.a,n),o=this.getPanel();if(!M.utils.isNullOrEmpty(o)){var r=o.getTemplatePanel();r.querySelector(".g-cartografia-localizacion4").addEventListener("click",function(){e.getPanel().isCollapsed()&&(r.style.removeProperty("left"),r.style.removeProperty("top")),M.window.WIDTH>=M.config.MOBILE_WIDTH&&(e.getPanel().isCollapsed()?e.deactivateDraggable_():e.activateDraggable_())}),this.template_=i,this.areaTable_=i.querySelector("div#m-attributetable-datas"),i.querySelector("#m-attributetable-layer").addEventListener("click",this.openPanel_.bind(this)),i.querySelector("#m-attributetable-select").addEventListener("change",function(t){e.pages_={total:0,actual:1,element:0},e.sortProperties_={active:!1,sortBy:null,sortType:null},e.renderPanel_(t.target[t.target.selectedIndex].getAttribute("name"))})}return i}},{key:"refresh_",value:function(){this.renderPanel_()}},{key:"renderPanel_",value:function(t){var e,n=this;M.utils.isNullOrEmpty(t)||(this.layer_=this.hasLayer_(t)[0]);var i=[],o=this.layer_.getFeatures();M.utils.isNullOrEmpty(o)||(e=Object.keys(o[0].getAttributes()),o.forEach(function(t){var e=Object.values(t.getAttributes());M.utils.isNullOrEmpty(e)||i.push(e)}),this.sortProperties_.active&&(i=this.sortAttributes_(i,e)));var r={};M.utils.isUndefined(e)||(r={headerAtt:e,legend:this.layer_.legend,pages:this.pageResults_(i),attributes:!M.utils.isNullOrEmpty(i)&&i.slice(this.pages_.element,this.pages_.element+this.numPages_)});var a={jsonp:!0,vars:r},s=M.template.compileSync(b.a,a),l=this.areaTable_.querySelector("table");M.utils.isNullOrEmpty(l)||this.areaTable_.removeChild(this.areaTable_.querySelector("#m-attributetable-content-attributes"));var u=this.areaTable_.querySelector(".m-attributetable-notResult");M.utils.isNullOrEmpty(u)||this.areaTable_.querySelector("#m-attributetable-content-attributes").parentElement.removeChild(this.areaTable_.querySelector("#m-attributetable-content-attributes"));(this.areaTable_.appendChild(s),M.utils.isNullOrEmpty(s.querySelector("div.m-attributetable-notResult")))?(this.areaTable_.querySelector("#m-attributetable-next").addEventListener("click",this.nextPage_.bind(this)),s.querySelector("#m-attributetable-previous").addEventListener("click",this.previousPage_.bind(this)),s.querySelector("input[value=selectAll]").addEventListener("click",this.selectAll.bind(this)),s.querySelector("#m-attributetable-attributes").addEventListener("click",this.openPanel_.bind(this)),s.querySelector("#m-attributetable-refresh").addEventListener("click",this.refresh_.bind(this)),Array.prototype.slice.call(this.areaTable_.querySelector("tr").querySelectorAll("td"),1).forEach(function(t){t.addEventListener("click",n.sort_.bind(n))}),this.hasNext_(s),this.hasPrevious_(s)):s.querySelector("#m-attributetable-refresh").addEventListener("click",this.refresh_.bind(this));return this.rePosition_(),s}},{key:"hasLayer_",value:function(t){var e=[];return!M.utils.isNullOrEmpty(t)&&(M.utils.isArray(t)||M.utils.isString(t)||t instanceof M.Layer)?(M.utils.isString(t)&&this.facadeMap_.getLayers().forEach(function(n){n.name===t&&e.push(n)}),t instanceof M.Layer&&this.facadeMap_.getLayers().forEach(function(n){n.equals(t)&&e.push(n)}),M.utils.isArray(t)&&this.facadeMap_.getLayers().forEach(function(n){t.indexOf(n.name)>=0&&e.push(n)}),e):(M.dialog.error("El parametro para el método hasLayer no es correcto.","Error"),e)}},{key:"selectAll",value:function(){this.selectAllActive_=!this.selectAllActive_,!0===this.selectAllActive_?this.addSelectAll_():this.removeSelectAll_()}},{key:"addSelectAll_",value:function(){this.areaTable_.querySelectorAll("input").forEach(function(t){t.setAttribute("checked",!0)})}},{key:"removeSelectAll_",value:function(){this.areaTable_.querySelectorAll("input").forEach(function(t){t.removeAttribute("checked")})}},{key:"pageResults_",value:function(t){return this.pages_.total=Math.ceil(t.length/this.numPages_),this.pages_}},{key:"nextPage_",value:function(){this.pages_.total>this.pages_.actual&&(this.pages_.actual=this.pages_.actual+1,this.pages_.element=this.pages_.element+this.numPages_,this.renderPanel_(),this.renderPanel_()&&(this.hasNext_(),this.hasPrevious_()))}},{key:"previousPage_",value:function(){this.pages_.total>=this.pages_.actual&&(this.pages_.actual=this.pages_.actual-1,this.pages_.element=this.pages_.element-this.numPages_,this.renderPanel_(),this.renderPanel_()&&this.hasPrevious_())}},{key:"hasNext_",value:function(t){var e=this.template_;M.utils.isNullOrEmpty(t)||(e=t),this.pages_.actual<this.pages_.total&&e.querySelector("#m-attributetable-next").classList.remove("m-attributetable-hidden")}},{key:"hasPrevious_",value:function(t){var e=this.template_;M.utils.isNullOrEmpty(t)||(e=t),this.pages_.actual<=this.pages_.total&&1!==this.pages_.actual&&e.querySelector("#m-attributetable-previous").classList.remove("m-attributetable-hidden")}},{key:"sort_",value:function(t){!1===this.sortProperties_.active&&(this.sortProperties_.active=!0),this.sortProperties_.sortBy!==t.target.innerHTML?this.sortProperties_.sortType="<":this.sortProperties_.sortType=">"===this.sortProperties_.sortType?"<":">",this.sortProperties_.sortBy=t.target.innerHTML,this.renderPanel_()}},{key:"sortAttributes_",value:function(t,e){var n=this.sortProperties_.sortBy,i=e.indexOf(n),o=t.sort(function(t,e){return t[i]-e[i]});return">"===this.sortProperties_.sortType&&(o=o.reverse()),o}},{key:"openPanel_",value:function(t){var e=t.target.id;if("m-attributetable-layer"===e){var n=this.template_.querySelector("select#m-attributetable-select");n.classList.toggle("m-attributetable-hidden"),n.classList.toggle("show")}else"m-attributetable-attributes"===e&&(this.template_.querySelector("#m-attributetable-table").classList.toggle("m-attributetable-hidden"),this.template_.querySelector("#m-attributetable-tfoot").classList.toggle("m-attributetable-hidden"));this.rePosition_()}},{key:"activateDraggable_",value:function(){if(M.utils.isNullOrEmpty(this.draggable_)){this.setFixed_();var t=this.getPanel().getTemplatePanel();this.draggable_=new h.a(t,{containment:".m-mapea-container",handle:".m-attributetable-container>div.m-attributetable-panel div.title"})}this.draggable_.enable()}},{key:"deactivateDraggable_",value:function(){document.querySelector(".m-attributetable").style.position="relative",this.draggable_.disable()}},{key:"setFixed_",value:function(){var t=document.querySelector(".m-attributetable"),e=t.getBoundingClientRect();t.style.position="fixed",t.style.left="".concat(e.left,"px"),t.style.top="".concat(e.top,"px")}},{key:"rePosition_",value:function(){var t=this.getPanel().getTemplatePanel();parseInt(t.style.left.replace("px",""),10)+t.clientWidth>document.querySelector(".m-mapea-container").clientWidth&&(t.style.left="".concat(document.querySelector(".m-mapea-container").clientWidth-t.clientWidth,"px")),parseInt(t.style.top.replace("px",""),10)+t.clientHeight>document.querySelector(".m-mapea-container").clientHeight&&(t.style.top="".concat(document.querySelector(".m-mapea-container").clientHeight-t.clientHeight-10,"px"))}},{key:"equals",value:function(t){return t instanceof e}}]),e}(),E=n(19);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var k=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=[null,null,null];return(t=x(this,T(e).call(this))).control_=i[0],t.panel_=i[1],t.facadeMap_=i[2],t.numPages_=parseInt(!M.utils.isNullOrEmpty(n.pages)&&n.pages>=1&&n.pages%1==0?n.pages:M.config.ATTRIBUTETABLE_PAGES,10),t.name=e.NAME,t.metadata_=E.metadata,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,M.Plugin),function(t,e,n){e&&w(t.prototype,e),n&&w(t,n)}(e,[{key:"addTo",value:function(t){var e=this;t.on(M.evt.ADDED_LAYER,function(){e.destroy(),e.add(t)}),this.add(t)}},{key:"add",value:function(t){var n=this;this.facadeMap_=t,this.control_=new P(this.numPages_),this.panel_=new M.ui.Panel(e.NAME,{collapsible:!0,className:"m-attributetable",collapsedButtonClass:"g-cartografia-localizacion4",position:M.ui.position.TR,tooltip:"Tabla de atributos"}),this.panel_.addControls(this.control_),this.panel_.on(M.evt.SHOW,function(e){0===t.getWFS().length&&0===t.getKML().length&&0===t.getLayers().filter(function(t){return"GeoJSON"===t.type})&&(n.panel_.collapse(),M.dialog.info("No existen capas consultables."))}),t.addPanels(this.panel_)}},{key:"destroy",value:function(){this.facadeMap_.removeControls([this.control_]);var t=[null,null,null];this.control_=t[0],this.panel_=t[1],this.facadeMap_=t[2]}},{key:"getControls",value:function(){var t=[];return t.push(this.control_),t}},{key:"getAPIRest",value:function(){return"attributetable"}},{key:"getMetadata",value:function(){return this.metadata_}}]),e}();k.NAME="attributetable",null==window.M.plugin&&(window.M.plugin={}),window.M.plugin.AttributeTable=k},8:function(t,e,n){var i,o;
/*!
 * Draggabilly v2.2.0
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */
/*!
 * Draggabilly v2.2.0
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */
!function(r,a){i=[n(12),n(13)],void 0===(o=function(t,e){return function(t,e,n){"use strict";function i(t,e){for(var n in e)t[n]=e[n];return t}var o=t.jQuery;function r(t,e){this.element="string"==typeof t?document.querySelector(t):t,o&&(this.$element=o(this.element)),this.options=i({},this.constructor.defaults),this.option(e),this._create()}var a=r.prototype=Object.create(n.prototype);r.defaults={},a.option=function(t){i(this.options,t)};var s={relative:!0,absolute:!0,fixed:!0};function l(t,e,n){return n=n||"round",e?Math[n](t/e)*e:t}a._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=i({},this.position);var t=getComputedStyle(this.element);s[t.position]||(this.element.style.position="relative"),this.on("pointerDown",this.onPointerDown),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},a.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},a.dispatchEvent=function(t,e,n){var i=[e].concat(n);this.emitEvent(t,i),this.dispatchJQueryEvent(t,e,n)},a.dispatchJQueryEvent=function(e,n,i){var o=t.jQuery;if(o&&this.$element){var r=o.Event(n);r.type=e,this.$element.trigger(r,i)}},a._getPosition=function(){var t=getComputedStyle(this.element),e=this._getPositionCoord(t.left,"width"),n=this._getPositionCoord(t.top,"height");this.position.x=isNaN(e)?0:e,this.position.y=isNaN(n)?0:n,this._addTransformPosition(t)},a._getPositionCoord=function(t,n){if(-1!=t.indexOf("%")){var i=e(this.element.parentNode);return i?parseFloat(t)/100*i[n]:0}return parseInt(t,10)},a._addTransformPosition=function(t){var e=t.transform;if(0===e.indexOf("matrix")){var n=e.split(","),i=0===e.indexOf("matrix3d")?12:4,o=parseInt(n[i],10),r=parseInt(n[i+1],10);this.position.x+=o,this.position.y+=r}},a.onPointerDown=function(t,e){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",t,[e])},a.dragStart=function(t,e){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",t,[e]),this.animate())},a.measureContainment=function(){var t=this.getContainer();if(t){var n=e(this.element),i=e(t),o=this.element.getBoundingClientRect(),r=t.getBoundingClientRect(),a=i.borderLeftWidth+i.borderRightWidth,s=i.borderTopWidth+i.borderBottomWidth,l=this.relativeStartPosition={x:o.left-(r.left+i.borderLeftWidth),y:o.top-(r.top+i.borderTopWidth)};this.containSize={width:i.width-a-l.x-n.width,height:i.height-s-l.y-n.height}}},a.getContainer=function(){var t=this.options.containment;if(t)return t instanceof HTMLElement?t:"string"==typeof t?document.querySelector(t):this.element.parentNode},a.onPointerMove=function(t,e,n){this.dispatchJQueryEvent("pointerMove",t,[e,n])},a.dragMove=function(t,e,n){if(this.isEnabled){var i=n.x,o=n.y,r=this.options.grid,a=r&&r[0],s=r&&r[1];i=l(i,a),o=l(o,s),i=this.containDrag("x",i,a),o=this.containDrag("y",o,s),i="y"==this.options.axis?0:i,o="x"==this.options.axis?0:o,this.position.x=this.startPosition.x+i,this.position.y=this.startPosition.y+o,this.dragPoint.x=i,this.dragPoint.y=o,this.dispatchEvent("dragMove",t,[e,n])}},a.containDrag=function(t,e,n){if(!this.options.containment)return e;var i="x"==t?"width":"height",o=l(-this.relativeStartPosition[t],n,"ceil"),r=this.containSize[i];return r=l(r,n,"floor"),Math.max(o,Math.min(r,e))},a.onPointerUp=function(t,e){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",t,[e])},a.dragEnd=function(t,e){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",t,[e]))},a.animate=function(){if(this.isDragging){this.positionDrag();var t=this;requestAnimationFrame(function(){t.animate()})}},a.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},a.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},a.staticClick=function(t,e){this.dispatchEvent("staticClick",t,[e])},a.setPosition=function(t,e){this.position.x=t,this.position.y=e,this.setLeftTop()},a.enable=function(){this.isEnabled=!0},a.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},a.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},a._init=function(){},o&&o.bridget&&o.bridget("draggabilly",r);return r}(r,t,e)}.apply(e,i))||(t.exports=o)}(window)}});