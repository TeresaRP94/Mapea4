<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <title>PRUEBA DESARROLLO</title>

   <!-- styles -->
   <link href="../../libraries/components-font-awesome/font-awesome.css" rel="stylesheet" />
   <link href="../../src/impl/ol3/css/ol3.css" rel="stylesheet" />
   <link href="../../src/impl/ol3/css/custom.css" rel="stylesheet" />
   <link href="../../src/facade/css/fonts.css" rel="stylesheet" />
   <link href="../../src/facade/css/popup.css" rel="stylesheet" />
   <link href="../../src/facade/css/controls/getfeatureinfo.css" rel="stylesheet" />
   <link href="../../src/facade/css/controls/layerswitcher.css" rel="stylesheet" />
   <link href="../../src/facade/css/controls/location.css" rel="stylesheet" />
   <link href="../../src/facade/css/controls/scale.css" rel="stylesheet" />
   <link href="../../src/facade/css/controls/wmcselector.css" rel="stylesheet" />
   <link href="../../src/facade/css/mapea.css" rel="stylesheet" />
   <style rel="stylesheet">
      html,
      body {
         margin: 0;
         padding: 0;
         height: 100%;
         overflow: hidden;
      }
   </style>
</head>

<body>
   <!-- container -->
   <div id="mapa" class="container"></div>

   <!-- libraries -->
   <script type="text/javascript" src="../../libraries/proj4/proj4.js"></script>
   <script type="text/javascript" src="../../libraries/closure/closure/goog/base.js"></script>
   <script type="text/javascript" src="../mapea.deps.js"></script>
   <!-- plugin -->
   <script type="text/javascript" src="countlayers.js"></script>
   <script type="text/javascript" src="../../src/configuration.js"></script>

   <script type="application/javascript">
      goog.require("M");
      goog.require("M.impl");
      goog.require("M.plugin.CountLayers");
      goog.require('M.impl.plugin.CountLayers');

      M.impl(M.impl);

      var mapa = M.map({
         container: 'mapa',
         wmcfile: ['callejero']
      });

      try {
         mapa.countLayers();
      }
      catch (err) {
         console.log('el mapa no tiene el método countLayers');
      }

      // 5. Creates the plugin
      var plugin = new M.plugin.CountLayers();

      // 6. Adds the plugin into the map
      mapa.addPlugin(plugin);

      console.log('al añadir el plugin sí lo tiene:');
      mapa.countLayers();
   </script>
</body>

</html>